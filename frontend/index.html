<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Congés</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <script src="/tailwind-cdn.js"></script>
    <link rel="icon" type="image/png" href="/favicoConge.png" />
</head>

<body>
    

    <div id="responsive-menu-container"></div>

    <script src="/ResponsiveMenu.js"></script>
    <script type="module" src="./src/js/authGuard.js"></script>
    <script type="module" src="./src/js/dashboard.js"></script>

    <script>
        const menu = new ResponsiveMenu({
    onNavigate: function (item, index) {
        // Obtenir l'URL de base (origine + chemin jusqu'à la racine du projet)
        const baseUrl = window.location.origin + '/';
        
        switch (index) {
            case 0:
                window.location.href = baseUrl + "index.html";
                break;
            case 1:
                window.location.href = baseUrl + "ajouterAgent.html";
                break;
            case 2:
                window.location.href = baseUrl + "gererConges.html";
                break;
        }
    }
});

        // Active le lien "Gérer Congés"
        menu.setActiveLink(0);
        // Configuration du bouton de déconnexion
        document.addEventListener('DOMContentLoaded', function () {
            // Attendre que le contenu soit injecté
            setTimeout(() => {
                const logoutBtn = document.getElementById('logoutBtn');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', function () {
                        if (window.AuthGuard) {
                            window.AuthGuard.logout();
                        }
                    });
                }
            }, 100);
        });

        // Injecter le contenu
        menu.updateContent(`
    <div class="flex flex-col flex-1 overflow-y-auto min-h-screen">
        <!-- ==================== HEADER ==================== -->
        <div class="flex items-center justify-between h-16 bg-[#f3f4f6] border-b px-4">
            <h1 class="text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold">Tableau de bord</h1>
            <div class="flex items-center w-full md:w-[55%] ml-4 md:ml-0">
                <input id="searchInput"
                    class="w-full border rounded-full px-3 md:px-4 py-2 border-gray-400 text-sm md:text-base"
                    type="text" placeholder="Rechercher un agent..." />
            </div>
            <div class="flex items-center space-x-4">
                <span data-user-display="firstname" class="text-sm font-medium text-gray-700"></span>
                <button id="logoutBtn"
    class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md text-sm transition-colors">
    Déconnexion
</button>
            </div>
        </div>

        <!-- ==================== DASHBOARD CONTENT ==================== -->
        <div class="flex-1 p-4 md:p-6 space-y-4 md:space-y-6">
            
            <!-- === Stats Cards === -->
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 mb-6 md:mb-8">
                <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-4 md:p-6 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-blue-100 text-xs md:text-sm font-medium">Total Agents</p>
                            <p id="totalAgents" class="text-2xl md:text-3xl font-bold">0</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-full p-2 md:p-3">
                            <i class="fas fa-users text-lg md:text-2xl"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-4 md:p-6 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-orange-100 text-xs md:text-sm font-medium">Congés en cours</p>
                            <p id="congesEnCours" class="text-2xl md:text-3xl font-bold">0</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-full p-2 md:p-3">
                            <i class="fas fa-calendar-check text-lg md:text-2xl"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-4 md:p-6 text-white sm:col-span-2 md:col-span-1">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-green-100 text-xs md:text-sm font-medium">Congés terminés</p>
                            <p id="congesTermines" class="text-2xl md:text-3xl font-bold">0</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-full p-2 md:p-3">
                            <i class="fas fa-calendar-times text-lg md:text-2xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- === Main Grid === -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6">
                
                <!-- Liste des Agents -->
                <div class="lg:col-span-2 bg-white rounded-xl shadow-lg h-[500px] flex flex-col">
                    <div class="p-4 md:p-6 border-b border-gray-200">
                        <h2 class="text-lg md:text-xl font-bold text-gray-800">Liste des Agents</h2>
                    </div>
                    <div class="p-4 md:p-6 flex-1 overflow-y-auto">
                        <div class="overflow-x-auto">
                            <table class="w-full min-w-[500px]">
                                <thead>
                                    <tr class="border-b border-gray-200">
                                        <th class="text-left py-2 md:py-3 px-2 md:px-4 font-semibold text-gray-700 text-sm md:text-base">Matricule</th>
                                        <th class="text-left py-2 md:py-3 px-2 md:px-4 font-semibold text-gray-700 text-sm md:text-base">Agent</th>
                                        <th class="text-left py-2 md:py-3 px-2 md:px-4 font-semibold text-gray-700 text-sm md:text-base">Fonction</th>
                                        <th class="text-center py-2 md:py-3 px-2 md:px-4 font-semibold text-gray-700 text-sm md:text-base">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="agentsList">
                                    <!-- rempli dynamiquement -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Détails de l'Agent -->
                <div class="bg-white rounded-xl shadow-lg h-[500px] flex flex-col">
                    <div class="p-4 md:p-6 border-b border-gray-200">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0">
                            <h2 class="text-lg md:text-xl font-bold text-gray-800">Détails Agent</h2>
                            <div class="flex items-center space-x-2">
                                <label for="yearFilter" class="text-sm font-medium text-gray-700">Année:</label>
                                <select id="yearFilter" class="border border-gray-300 rounded-md px-2 md:px-3 py-1 text-sm"></select>
                            </div>
                        </div>
                    </div>
                    <div id="agentDetails" class="p-4 md:p-6 flex-1 overflow-y-auto">
                        <div class="text-center text-gray-500 py-6 md:py-8">
                            <i class="fas fa-user-circle text-4xl md:text-6xl mb-3 md:mb-4"></i>
                            <p class="text-sm md:text-base">Sélectionnez un agent pour voir ses détails</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
`);

    </script>
</body>

</html>